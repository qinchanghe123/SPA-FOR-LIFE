<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <link rel="icon" type="image/x-icon" href="favicon.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>SPA FOR LIFE</title>
    <meta name="description" content="SPA FOR LIFE ‚Äî two NYC locations (Chinatown & Flushing). Beauty ‚Ä¢ Eyelash ‚Ä¢ Nails ‚Ä¢ Massage. Open daily 10am‚Äì7pm."/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;600;700&display=swap" rel="stylesheet"/>
    <style>
      :root{
        /* Bright, high-end palette */
        --page:#f9fbff;
        --paper:#ffffff;
        --ink:#172033;
        --muted:#5b6a81;
        --brand1:#6B73FF; /* periwinkle */
        --brand2:#5FD0C7; /* mint aqua */
        --accent:#FFB86B; /* soft apricot */
        --halo:#eaf2ff;
        --line:#dfe7ff;
        --shadow:0 14px 32px rgba(29,44,88,.14);
        --ring:0 0 0 3px rgba(107,115,255,.18);
      }

      *{box-sizing:border-box}
      html{scroll-behavior:smooth}
      body{
        margin:0; color:var(--ink);
        background:
          radial-gradient(1100px 580px at 80% -20%, #eaf2ff 0%, rgba(234,242,255,0) 60%),
          linear-gradient(180deg, #ffffff 0%, #f6f9ff 100%);
        font-family:'Josefin Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      }

      /* --- GLOBAL LAYOUT --- */
      .container{max-width:1200px; margin:0 auto; padding:0 22px}

      /* --- NAV --- */
      nav{
        position:fixed; inset:0 0 auto 0; z-index:50;
        backdrop-filter:saturate(160%) blur(10px);
        background:linear-gradient(90deg, rgba(255,255,255,.85), rgba(255,255,255,.75));
        border-bottom:1px solid rgba(45,70,130,.08);
      }
      nav .container{display:flex; justify-content:center}
      nav ul{list-style:none; display:flex; gap:28px; padding:14px 0; margin:0}
      nav a{
        color:#10203c; text-decoration:none; font-weight:700; letter-spacing:.3px;
        padding:10px 16px; border-radius:999px; transition:.2s ease;
      }
      nav a:hover{background:linear-gradient(135deg, rgba(107,115,255,.18), rgba(95,208,199,.18))}
      body{margin-top:66px}

      /* --- HERO --- */
      .home{
        min-height:84vh; display:grid; place-items:center; position:relative; overflow:hidden;
        background:url('2.avif') center/cover no-repeat fixed;
      }
      .home::before{
        /* ultra-light veil ‚Üí keeps image visible, aids legibility */
        content:""; position:absolute; inset:0;
        background:linear-gradient(180deg, rgba(255,255,255,.06) 0%, rgba(255,255,255,.18) 60%, rgba(255,255,255,.26) 100%);
        pointer-events:none;
      }
      .hero-card{
        position:relative; z-index:2; width:min(94%,1100px);
        display:grid; gap:22px; grid-template-columns: 1.1fr .9fr;
        background:linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.55));
        border:1px solid rgba(45,70,130,.10);
        border-radius:28px; padding:34px; box-shadow:var(--shadow);
      }
      .hero-left{padding-right:14px}
      .title-wrap{display:flex; align-items:flex-end; gap:14px; flex-wrap:wrap}
      .title{
        margin:0; font-weight:300; letter-spacing:2px; color:var(--brand1);
        font-size:clamp(32px,6vw,60px); line-height:1.05;
      }
      .tag-pill{
        padding:8px 14px; border-radius:999px; font-weight:800; font-size:.9rem;
        background:linear-gradient(135deg, var(--brand1), var(--brand2)); color:#fff;
        box-shadow:0 10px 26px rgba(107,115,255,.25);
      }
      .tagline{margin:8px 0 10px; font-size:clamp(16px,2.2vw,20px); color:#2e3a58}
      .hours{margin:0; font-weight:800; color:#324469}

      .hero-right{
        background:conic-gradient(from 180deg at 60% 40%, rgba(107,115,255,.18), rgba(95,208,199,.18), rgba(255,184,107,.18), rgba(107,115,255,.18));
        border:1px dashed rgba(45,70,130,.16);
        border-radius:22px; padding:18px; display:flex; align-items:center; justify-content:center;
      }
      .hero-right .cta-wrap{
        display:flex; gap:16px; flex-direction:column; width:100%;
      }
      .cta{
        background:var(--paper);
        border:1px solid rgba(45,70,130,.10);
        border-radius:18px; padding:18px 20px; width:100%;
        box-shadow:var(--shadow);
      }
      .cta h3{margin:0 0 6px; color:#293a70}
      .phone{display:block; color:#132a55; text-decoration:none; font-weight:900; font-size:1.35rem}
      .btn{
        appearance:none; border:0; border-radius:14px; cursor:pointer; font-weight:900; color:#0f1a2a;
        padding:12px 18px; background:linear-gradient(135deg, var(--brand1), var(--brand2));
        box-shadow:0 16px 34px rgba(107,115,255,.25); transition:.2s ease; width:100%;
      }
      .btn:hover{transform:translateY(-2px); box-shadow:0 20px 46px rgba(107,115,255,.32)}

      /* --- SECTION TITLES --- */
      .section{padding:72px 0}
      .section-title{
        text-align:center; margin:0; color:#172447; font-size:clamp(26px,3.4vw,40px);
        letter-spacing:.4px;
      }
      .under{
        width:120px; height:8px; margin:12px auto 8px; border-radius:999px;
        background:linear-gradient(90deg, var(--brand1), var(--brand2));
        filter:drop-shadow(0 6px 14px rgba(107,115,255,.25));
      }
      .section-sub{ text-align:center; margin:0 0 32px; color:var(--muted) }

      /* --- SERVICES: elevated mosaic with image backgrounds --- */
      #services{background:linear-gradient(180deg, #ffffff 0%, #f5f8ff 100%)}
      .services-scene{perspective:1200px}
      .services-grid{
        display:grid; gap:22px; grid-template-columns: repeat(12, 1fr);
        align-items:stretch;
      }
      /* Mosaic layout to feel curated & luxurious */
      .service-card{
        position:relative; min-height:300px; border-radius:22px; overflow:hidden; isolation:isolate;
        box-shadow:var(--shadow), inset 0 0 0 1px rgba(45,70,130,.06);
        transform-style:preserve-3d; transition:transform .35s cubic-bezier(.2,.7,.2,1), box-shadow .35s ease;
      }
      .service-card:hover{ transform:translateZ(14px) rotateX(1.2deg) rotateY(-.8deg); box-shadow:0 22px 54px rgba(20,40,80,.18) }

      /* columns */
      .w6{grid-column: span 6} .w4{grid-column: span 4} .w8{grid-column: span 8}
      @media (max-width:900px){ .w6,.w4,.w8{grid-column: span 12} }

      .service-card::before{
        content:""; position:absolute; inset:0; z-index:-2;
        background: var(--bg) center/cover no-repeat;
        transform:scale(1.02); transition:transform .7s ease;
      }
      .service-card:hover::before{ transform:scale(1.07) }

      /* gradient veil for text legibility without hiding image */
      .service-card::after{
        content:""; position:absolute; inset:0; z-index:-1;
        background:
          linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.22) 40%, rgba(255,255,255,.92) 100%);
      }
      .service-inner{position:absolute; inset:auto 0 0 0; padding:18px 18px 20px; color:#1e2c4b}
      .badge{
        display:inline-grid; place-items:center; width:56px; height:56px; border-radius:14px;
        background:linear-gradient(135deg, var(--brand1), var(--brand2)); color:#fff; font-size:26px; font-weight:900;
        border:1px solid rgba(45,70,130,.12); box-shadow:0 10px 24px rgba(107,115,255,.28);
      }
      .service-title{margin:10px 0 6px; font-size:1.28rem; letter-spacing:.3px}
      .service-desc{margin:0; color:#405170}

      /* subtle animated border highlight */
      .service-card .glow{
        position:absolute; inset:10px; border-radius:18px; pointer-events:none;
        background:conic-gradient(from 90deg, rgba(107,115,255,.0), rgba(95,208,199,.28), rgba(255,184,107,.0));
        filter:blur(14px); opacity:.0; transition:opacity .35s ease;
      }
      .service-card:hover .glow{opacity:.45}

      /* --- GALLERY (carousel) --- */
      #gallery{background:linear-gradient(180deg, var(--halo) 0%, #ffffff 100%)}
      .carousel{position:relative}
      .carousel-viewport{
        position:relative; border-radius:24px; overflow:hidden; background:#f0f4ff;
        height: clamp(260px, 48vw, 560px);
        box-shadow:var(--shadow), inset 0 0 0 1px rgba(45,70,130,.06);
      }
      .carousel-track{display:flex; height:100%; width:100%; transition: transform .6s cubic-bezier(.2,.7,.2,1)}
      .slide{flex:0 0 100%; position:relative}
      .slide img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; user-select:none; -webkit-user-drag:none}

      .ctrl{
        position:absolute; top:50%; transform:translateY(-50%); z-index:3; width:46px; height:46px;
        border-radius:50%; border:1px solid rgba(45,70,130,.18);
        background:linear-gradient(180deg, #ffffff, #f2f6ff);
        color:#1a2238; font-size:22px; display:grid; place-items:center; cursor:pointer; transition:.2s ease;
        box-shadow:var(--shadow)
      }
      .ctrl:hover{transform:translateY(-50%) scale(1.06)}
      .ctrl.prev{left:22px} .ctrl.next{right:22px}

      .dots{display:flex; gap:8px; justify-content:center; margin:16px 0 0}
      .dot{width:10px; height:10px; border-radius:50%; background:#c8d3ff; border:0; cursor:pointer}
      .dot[aria-current="true"]{background:linear-gradient(135deg,var(--brand1),var(--brand2))}

      /* --- CONTACT / MAPS --- */
      #contact{background:linear-gradient(180deg, #ffffff 0%, #f7fbff 100%)}
      .locs{display:grid; gap:24px; grid-template-columns:repeat(12,1fr)}
      .loc{grid-column: span 6; background:var(--paper); border:1px solid rgba(45,70,130,.10); border-radius:22px; padding:22px; box-shadow:var(--shadow)}
      .loc h3{margin:0 0 10px; color:#25386c}
      .map{width:100%; height:300px; border:0; border-radius:14px; box-shadow:var(--shadow)}
      .info p{margin:10px 0; color:#3a4a5e}
      .info a{color:#25386c; text-decoration:none; font-weight:800}
      .info a:hover{text-decoration:underline}
      @media (max-width:900px){ .loc{grid-column: span 12} }

      footer{ text-align:center; padding:28px 12px; color:#5a6b86; background:#ffffff; border-top:1px solid rgba(45,70,130,.08) }

      /* --- BOOKING FORM --- */
      .booking-form{
        display:none; background:var(--paper); color:var(--ink);
        padding:24px; border-radius:18px; box-shadow:var(--shadow);
        max-width:560px; margin:10px auto 0; position:relative; border:1px solid rgba(45,70,130,.10)
      }
      .booking-form.active{display:block; animation:fadeIn .22s ease}
      @keyframes fadeIn{from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:none}}
      .close-form{position:absolute; top:10px; right:14px; background:none; border:0; font-size:26px; color:#7a889e; cursor:pointer}
      .form-row{display:flex; gap:12px; flex-wrap:wrap}
      .form-group{flex:1 1 220px; text-align:left}
      .form-group label{display:block; font-weight:700; margin:8px 0 6px; color:#2b3b6b}
      .form-group input,.form-group select,.form-group textarea{
        width:100%; padding:14px; border:2px solid #e6ecfb; border-radius:12px; font:inherit; background:#fff; transition:.2s ease;
      }
      .form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:0; border-color:var(--brand1); box-shadow:var(--ring)}

      /* --- RESPONSIVE --- */
      @media (max-width:980px){
        .hero-card{grid-template-columns:1fr}
        .hero-left{padding-right:0}
      }
      @media (max-width:768px){
        .ctrl{width:42px;height:42px}
        .ctrl.prev{left:12px}.ctrl.next{right:12px}
      }
    </style>
  </head>

  <body>
    <!-- NAV -->
    <nav>
      <div class="container">
        <ul>
          <li><a href="#services">Services</a></li>
          <li><a href="#gallery">Gallery</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>

    <!-- HERO -->
    <section id="home" class="home">
      <div class="hero-card container" style="padding-left:34px; padding-right:34px">
        <div class="hero-left">
          <div class="title-wrap">
            <h1 class="title">SPA FOR LIFE</h1>
            <span class="tag-pill">NYC ‚Ä¢ Since</span>
          </div>
          <p class="tagline">Your sanctuary of tranquility and rejuvenation</p>
          <p class="hours">Open daily 10:00am ‚Äì 7:00pm</p>
        </div>

        <div class="hero-right">
          <div class="cta-wrap">
            <div class="cta">
              <h3>üìû Call for Appointment</h3>
              <a class="phone" href="tel:+1-212-925-0008">212-925-0008 (Chinatown)</a>
              <a class="phone" href="tel:+1-718-799-0703">718-799-0703 (Flushing)</a>
            </div>
            <div class="cta">
              <h3>üíª Book Online</h3>
              <button class="btn" onclick="showBookingForm()">Schedule Now</button>
              <p style="margin:.6rem 0 0; color:#516183; text-align:center">We‚Äôll confirm your appointment within 30 minutes.</p>
            </div>
          </div>
        </div>

        <!-- Booking Form -->
        <div id="bookingForm" class="booking-form" role="dialog" aria-modal="true" aria-labelledby="bookTitle">
          <button class="close-form" onclick="hideBookingForm()" aria-label="Close">‚úï</button>
          <h3 id="bookTitle" style="margin:0 0 10px; color:#2b3b6b">Schedule Your Visit</h3>
          <form onsubmit="submitBooking(event)">
            <div class="form-row">
              <div class="form-group">
                <label for="firstName">First Name *</label>
                <input id="firstName" required/>
              </div>
              <div class="form-group">
                <label for="lastName">Last Name *</label>
                <input id="lastName" required/>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="phone">Phone *</label>
                <input id="phone" type="tel" required/>
              </div>
              <div class="form-group">
                <label for="email">Email</label>
                <input id="email" type="email"/>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="people">People *</label>
                <select id="people" required>
                  <option value="">Select Number</option>
                  <option>1</option><option>2</option><option>3</option><option>4</option><option>5+</option>
                </select>
              </div>
              <div class="form-group">
                <label for="date">Preferred Date *</label>
                <input id="date" type="date" required/>
              </div>
              <div class="form-group">
                <label for="time">Preferred Time *</label>
                <input id="time" type="time" min="10:00" max="19:00" required/>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group" style="flex:1 1 100%">
                <label for="service">Preferred Service</label>
                <select id="service">
                  <option value="">Select a Service</option>
                  <option>Beauty (Facial / Skincare)</option>
                  <option>Eyelash Extensions</option>
                  <option>Nails (Manicure)</option>
                  <option>Massage</option>
                </select>
              </div>
            </div>
            <div class="form-group" style="flex:1 1 100%">
              <label for="notes">Special Requests</label>
              <textarea id="notes" rows="3" placeholder="Any preferences, health considerations, or requests..."></textarea>
            </div>
            <button type="submit" class="btn" style="width:100%">Request Appointment</button>
            <p style="font-size:.9rem; color:#52627a; margin:.6rem 0 0; text-align:center">We will contact you within 30 minutes to confirm.</p>
          </form>
        </div>
      </div>
    </section>

    <!-- SERVICES (Beauty, Eyelash, Nails, Massage) with background images & luxury mosaic layout -->
    <section id="services" class="section">
      <div class="container">
        <h2 class="section-title">Store Services</h2>
        <div class="under"></div>
        <p class="section-sub">Beauty ‚Ä¢ Eyelash Extensions ‚Ä¢ Nails ‚Ä¢ Massage</p>

        <div class="services-scene">
          <div class="services-grid">
            <!-- Beauty (new background from user) -->
            <article class="service-card w6" style="--bg:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQAqPyynqps88YfFYnawNcsrouCqbARrhsXx8-7QoQylzVUsU4nHbk9hcGEN5Tkr-PFpbs&usqp=CAU')">
              <span class="glow"></span>
              <div class="service-inner">
                <div class="badge">üíÜ‚Äç‚ôÄÔ∏è</div>
                <h3 class="service-title">Beauty</h3>
                <p class="service-desc">Facial care and skincare treatments for a luminous, refreshed complexion.</p>
              </div>
            </article>

            <!-- Eyelash -->
            <article class="service-card w4" style="--bg:url('https://www.msemma.com.tw/webfile/webdate/4845ed651e6b73a79eff6ff045a54c68/bbd45059acf82f0ee9b2b1b73e4e13845.jpg')">
              <span class="glow"></span>
              <div class="service-inner">
                <div class="badge">üëÅÔ∏è</div>
                <h3 class="service-title">Eyelash Extensions</h3>
                <p class="service-desc">Customized lash sets from natural to glamorous for effortless elegance.</p>
              </div>
            </article>

            <!-- Nails -->
            <article class="service-card w4" style="--bg:url('https://iam.marieclaire.com.tw/s1200c675h100b0webp100/assets/mc/202509/68D7F227D752D1758982695.jpeg')">
              <span class="glow"></span>
              <div class="service-inner">
                <div class="badge">üíÖ</div>
                <h3 class="service-title">Nails</h3>
                <p class="service-desc">Clean shaping, cuticle care, and polished finishes with lasting shine.</p>
              </div>
            </article>

            <!-- Massage (new background from user) -->
            <article class="service-card w8" style="--bg:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1L-0O6Juxasb8QicSAXdnWLSQjLrVvGVr8HPij_dvsgW7cWCeMVBGB-12hqGhPUkx5oA&usqp=CAU')">
              <span class="glow"></span>
              <div class="service-inner">
                <div class="badge">üíÜ</div>
                <h3 class="service-title">Massage</h3>
                <p class="service-desc">Relaxing and therapeutic bodywork to melt stress and restore balance.</p>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERY CAROUSEL (1.jpg‚Äì7.jpg, auto-adaptive) -->
    <section id="gallery" class="section">
      <div class="container">
        <h2 class="section-title">Gallery</h2>
        <div class="under"></div>
        <p class="section-sub">A glimpse of our calming environment.</p>

        <div class="carousel">
          <div class="carousel-viewport" id="carouselViewport">
            <div class="carousel-track" id="carouselTrack" style="transform:translateX(0)">
              <div class="slide"><img src="1.jpg" alt="SPA FOR LIFE environment 1"></div>
              <div class="slide"><img src="2.jpg" alt="SPA FOR LIFE environment 2"></div>
              <div class="slide"><img src="3.jpg" alt="SPA FOR LIFE environment 3"></div>
              <div class="slide"><img src="4.jpg" alt="SPA FOR LIFE environment 4"></div>
              <div class="slide"><img src="5.jpg" alt="SPA FOR LIFE environment 5"></div>
              <div class="slide"><img src="6.jpg" alt="SPA FOR LIFE environment 6"></div>
              <div class="slide"><img src="7.jpg" alt="SPA FOR LIFE environment 7"></div>
            </div>
            <button class="ctrl prev" id="prevBtn" aria-label="Previous slide">‚Äπ</button>
            <button class="ctrl next" id="nextBtn" aria-label="Next slide">‚Ä∫</button>
          </div>
          <div class="dots" id="dots" aria-label="Carousel Pagination"></div>
        </div>
      </div>
    </section>

    <!-- CONTACT / LOCATIONS -->
    <section id="contact" class="section">
      <div class="container">
        <h2 class="section-title">Contact & Locations</h2>
        <div class="under"></div>
        <p class="section-sub">Open daily 10:00am ‚Äì 7:00pm</p>

        <div class="locs">
          <div class="loc">
            <h3>CHINATOWN</h3>
            <iframe
              class="map"
              title="SPA FOR LIFE - Chinatown"
              loading="lazy"
              allowfullscreen
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=31%20Division%20Street%2C%20New%20York%2C%20NY%2010002&output=embed">
            </iframe>
            <div class="info">
              <p><strong>Address:</strong> 31 Division Street, New York, NY 10002</p>
              <p><strong>Phone:</strong> <a href="tel:+1-212-925-0008">212-925-0008</a></p>
              <p><strong>Hours:</strong> Daily 10am ‚Äì 7pm</p>
            </div>
          </div>

          <div class="loc">
            <h3>FLUSHING</h3>
            <iframe
              class="map"
              title="SPA FOR LIFE - Flushing"
              loading="lazy"
              allowfullscreen
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=135-19%20Roosevelt%20Ave%202R%2C%20Flushing%2C%20NY%2011354&output=embed">
            </iframe>
            <div class="info">
              <p><strong>Address:</strong> 135-19 Roosevelt Ave 2R, Flushing, NY 11354</p>
              <p><strong>Phone:</strong> <a href="tel:+1-718-799-0703">718-799-0703</a></p>
              <p><strong>Hours:</strong> Daily 10am ‚Äì 7pm</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <p>&copy; <span id="year"></span> SPA FOR LIFE. All rights reserved.</p>
    </footer>

    <script>
      // Booking form
      function showBookingForm(){
        const el = document.getElementById('bookingForm');
        el.classList.add('active');
        el.scrollIntoView({behavior:'smooth', block:'center'});
      }
      function hideBookingForm(){ document.getElementById('bookingForm').classList.remove('active') }
      function submitBooking(e){
        e.preventDefault();
        alert('Thanks! Your appointment request has been received. We will contact you within 30 minutes.');
        hideBookingForm();
      }
      document.getElementById('year').textContent = new Date().getFullYear();

      // Carousel
      (function(){
        const track = document.getElementById('carouselTrack');
        const viewport = document.getElementById('carouselViewport');
        const prev = document.getElementById('prevBtn');
        const next = document.getElementById('nextBtn');
        const dotsWrap = document.getElementById('dots');

        const slides = Array.from(track.children);
        const total = slides.length;
        let index = 0;
        let timer = null;

        // Build dots
        slides.forEach((_, i)=>{
          const b = document.createElement('button');
          b.className = 'dot';
          b.type = 'button';
          b.setAttribute('aria-label','Go to slide ' + (i+1));
          b.addEventListener('click', ()=>go(i,true));
          dotsWrap.appendChild(b);
        });

        function update(){
          track.style.transform = `translateX(-${index*100}%)`;
          dotsWrap.querySelectorAll('.dot').forEach((d,i)=>d.setAttribute('aria-current', i===index));
        }

        function go(i, user=false){
          index = (i + total) % total;
          update();
          if(user) restart();
        }

        function nextSlide(){ go(index+1) }
        function prevSlide(){ go(index-1) }

        prev.addEventListener('click', ()=>go(index-1,true));
        next.addEventListener('click', ()=>go(index+1,true));

        // Auto-play
        function start(){ timer = setInterval(nextSlide, 4200) }
        function stop(){ clearInterval(timer); timer=null }
        function restart(){ stop(); start() }

        viewport.addEventListener('mouseenter', stop);
        viewport.addEventListener('mouseleave', start);
        viewport.addEventListener('focusin', stop);
        viewport.addEventListener('focusout', start);

        // Swipe support
        let startX=0, dx=0, dragging=false;
        function onDown(e){ dragging=true; startX = e.touches? e.touches[0].clientX : e.clientX; dx=0; stop(); }
        function onMove(e){
          if(!dragging) return;
          const x = e.touches? e.touches[0].clientX : e.clientX;
          dx = x - startX;
          track.style.transform = `translateX(calc(-${index*100}% + ${dx}px))`;
        }
        function onUp(){
          if(!dragging) return;
          dragging=false;
          if(Math.abs(dx) > 60){ dx<0 ? nextSlide() : prevSlide(); }
          else update();
          start();
        }
        viewport.addEventListener('mousedown', onDown);
        window.addEventListener('mousemove', onMove);
        window.addEventListener('mouseup', onUp);
        viewport.addEventListener('touchstart', onDown,{passive:true});
        viewport.addEventListener('touchmove', onMove,{passive:true});
        viewport.addEventListener('touchend', onUp);

        // Init
        update(); start();
        window.addEventListener('visibilitychange', ()=> document.hidden ? stop() : start());
      })();
    </script>
  </body>
</html>
